// Tồn kho kỳ (snapshot theo chu kỳ)
model TonKhoKy {
  id          String  @id @default(uuid(7))
  ky          Int
  sanPhamId   String
  viTriKhoId  String?
  tonDauKy    Decimal @default(0) @db.Decimal(18, 3)
  nhapTrongKy Decimal @default(0) @db.Decimal(18, 3)
  xuatTrongKy Decimal @default(0) @db.Decimal(18, 3)
  tonCuoiKy   Decimal @default(0) @db.Decimal(18, 3)

  sanPham  SanPham   @relation(fields: [sanPhamId], references: [id])
  viTriKho ViTriKho? @relation(fields: [viTriKhoId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  createdBy String?  @db.VarChar(255)
  updatedBy String?  @db.VarChar(255)
  isDelete  Boolean  @default(false)

  @@index([sanPhamId, viTriKhoId])
}